<div class="container labform-wrapper">

  <h1 class="labform-title text-center">
    {{ editMode ? 'âœï¸ Editar Laboratorio' : 'â• Nuevo Laboratorio' }}
  </h1>

  <!-- Cargando -->
  <div *ngIf="loading" class="alert-info-custom">
    Cargando laboratorio...
  </div>

  <!-- Error -->
  <div *ngIf="error" class="alert-error">
    {{ error }}
  </div>

  <!-- FORMULARIO -->
  <form 
    *ngIf="!loading"
    [formGroup]="form"
    (ngSubmit)="onSubmit()"
    novalidate
    class="labform-card"
  >

    <!-- Nombre -->
    <div class="form-group">
      <label for="nombre" class="form-label">Nombre del Laboratorio</label>

      <input
        id="nombre"
        type="text"
        formControlName="nombre"
        class="form-input"
        [class.input-error]="hasError('nombre')"
      />

      <div *ngIf="hasError('nombre')" class="form-error">
        <ng-container *ngIf="hasError('nombre','required')">El nombre es obligatorio.</ng-container>
        <ng-container *ngIf="hasError('nombre','minlength')">Debe tener al menos 3 caracteres.</ng-container>
        <ng-container *ngIf="hasError('nombre','maxlength')">No puede superar los 100 caracteres.</ng-container>
      </div>
    </div>

    <!-- DirecciÃ³n -->
    <div class="form-group">
      <label for="direccion" class="form-label">DirecciÃ³n</label>

      <input
        id="direccion"
        type="text"
        formControlName="direccion"
        class="form-input"
        [class.input-error]="hasError('direccion')"
      />

      <div *ngIf="hasError('direccion')" class="form-error">
        <ng-container *ngIf="hasError('direccion','required')">La direcciÃ³n es obligatoria.</ng-container>
        <ng-container *ngIf="hasError('direccion','minlength')">Debe tener al menos 5 caracteres.</ng-container>
        <ng-container *ngIf="hasError('direccion','maxlength')">No puede superar los 200 caracteres.</ng-container>
      </div>
    </div>

    <!-- TelÃ©fono -->
    <div class="form-group">
      <label for="telefono" class="form-label">TelÃ©fono</label>

      <input
        id="telefono"
        type="text"
        formControlName="telefono"
        class="form-input"
        [class.input-error]="hasError('telefono')"
      />

      <div *ngIf="hasError('telefono')" class="form-error">
        <ng-container *ngIf="hasError('telefono','required')">El telÃ©fono es obligatorio.</ng-container>
        <ng-container *ngIf="hasError('telefono','pattern')">Debe ser un nÃºmero vÃ¡lido (solo dÃ­gitos).</ng-container>
      </div>
    </div>

    <!-- Botones -->
    <div class="labform-buttons">
      <button type="submit" class="btn btn-primary" [disabled]="form.invalid">
        {{ editMode ? 'ğŸ’¾ Actualizar' : 'â• Crear' }}
      </button>

      <a routerLink="/laboratorios" class="btn btn-ghost">
        ğŸ”™ Volver
      </a>
    </div>

  </form>
</div>
