<div class="container mt-4">

  <h2 class="mb-4 text-center">
    {{ editMode ? 'âœï¸ Editar Laboratorio' : 'â• Nuevo Laboratorio' }}
  </h2>

  <!-- Cargando -->
  <div *ngIf="loading" class="alert alert-info">
    Cargando laboratorio...
  </div>

 <!-- Error -->
  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <!-- Formulario -->
  <form *ngIf="!loading" [formGroup]="form" (ngSubmit)="onSubmit()" novalidate class="card shadow p-4">

    <!-- ========================= NOMBRE ========================= -->
    <div class="mb-3">
      <label for="nombre" class="form-label fw-bold">Nombre del Laboratorio</label>

      <input
        id="nombre"
        type="text"
        formControlName="nombre"
        class="form-control"
        [ngClass]="{ 'is-invalid': hasError('nombre') }"
      />

      <div *ngIf="hasError('nombre')" class="invalid-feedback">
        <ng-container *ngIf="hasError('nombre', 'required')">El nombre es obligatorio.</ng-container>
        <ng-container *ngIf="hasError('nombre', 'minlength')">Debe tener al menos 3 caracteres.</ng-container>
        <ng-container *ngIf="hasError('nombre', 'maxlength')">No puede superar los 100 caracteres.</ng-container>
      </div>
    </div>

    <!-- ========================= DIRECCIÃ“N ========================= -->
    <div class="mb-3">
      <label for="direccion" class="form-label fw-bold">DirecciÃ³n</label>

      <input
        id="direccion"
        type="text"
        formControlName="direccion"
        class="form-control"
        [ngClass]="{ 'is-invalid': hasError('direccion') }"
      />

      <div *ngIf="hasError('direccion')" class="invalid-feedback">
        <ng-container *ngIf="hasError('direccion', 'required')">La direcciÃ³n es obligatoria.</ng-container>
        <ng-container *ngIf="hasError('direccion', 'minlength')">Debe tener al menos 5 caracteres.</ng-container>
        <ng-container *ngIf="hasError('direccion', 'maxlength')">No puede superar los 200 caracteres.</ng-container>
      </div>
    </div>

    <!-- ========================= TELÃ‰FONO ========================= -->
    <div class="mb-3">
      <label for="telefono" class="form-label fw-bold">TelÃ©fono</label>

      <input
        id="telefono"
        type="text"
        formControlName="telefono"
        class="form-control"
        [ngClass]="{ 'is-invalid': hasError('telefono') }"
      />

      <div *ngIf="hasError('telefono')" class="invalid-feedback">
        <ng-container *ngIf="hasError('telefono','required')">El telÃ©fono es obligatorio.</ng-container>
        <ng-container *ngIf="hasError('telefono','pattern')">Debe ser un nÃºmero vÃ¡lido (solo dÃ­gitos).</ng-container>
      </div>
    </div>

    <!-- ========================= BOTONES ========================= -->
    <div class="d-flex justify-content-between mt-4">
      <button type="submit" class="btn btn-primary" [disabled]="form.invalid">
        {{ editMode ? 'ğŸ’¾ Actualizar' : 'â• Crear' }}
      </button>

      <a routerLink="/laboratorios" class="btn btn-outline-secondary">
        ğŸ”™ Volver
      </a>
    </div>

  </form>
</div>
