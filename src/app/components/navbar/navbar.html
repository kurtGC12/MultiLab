<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">

    <!-- Marca / tÃ­tulo -->
    <a class="navbar-brand" routerLink="/home">
      ðŸ§ª MultiLab - GestiÃ³n de Laboratorios
    </a>

    <!-- BotÃ³n colapsable -->
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarPrincipal"
      aria-controls="navbarPrincipal"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarPrincipal">

      <!-- MenÃº izquierdo -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">

        <!-- Inicio -->
        <li class="nav-item">
          <a
            class="nav-link"
            routerLink="/home"
            routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }"
          >
            Inicio
          </a>
        </li>

        <!-- Laboratorios (si estÃ¡ autenticado) -->
        <li class="nav-item" *ngIf="estaAutenticado">
          <a
            class="nav-link"
            routerLink="/laboratorios"
            routerLinkActive="active"
          >
            Laboratorios
          </a>
        </li>

        <!-- Usuarios â†’ SOLO ADMIN -->
        <li class="nav-item" *ngIf="esAdmin">
          <a
            class="nav-link"
            routerLink="/usuarios"
            routerLinkActive="active"
          >
            Usuarios
          </a>
        </li>

        <!-- Perfil â†’ SOLO ANALISTA -->
        <li class="nav-item" *ngIf="esAnalista">
          <a
            class="nav-link"
            routerLink="/perfil"
            routerLinkActive="active"
          >
            Mi Perfil
          </a>
        </li>

        <!-- Opciones para NO autenticado -->
        <ng-container *ngIf="!estaAutenticado">
          <li class="nav-item">
            <a class="nav-link" routerLink="/login" routerLinkActive="active">
              Iniciar sesiÃ³n
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link" routerLink="/registro" routerLinkActive="active">
              Registrarme
            </a>
          </li>
        </ng-container>

      </ul>

      <!-- Lado derecho: usuario autenticado -->
      <div class="d-flex align-items-center">

        <ng-container *ngIf="estaAutenticado; else noSesion">
          <span class="navbar-text me-3">
            ðŸ‘¤ {{ nombreUsuario }}
            <span class="badge bg-info text-dark ms-1">
              {{ rolUsuario }}
            </span>
          </span>

          <button
            class="btn btn-outline-light btn-sm"
            (click)="cerrarSesion()">
            Cerrar sesiÃ³n
          </button>
        </ng-container>

        <ng-template #noSesion>
          <span class="navbar-text">No hay usuario autenticado</span>
        </ng-template>

      </div>

    </div>
  </div>
</nav>

